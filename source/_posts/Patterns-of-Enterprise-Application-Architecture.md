---
title: Patterns of Enterprise Application Architecture
date: 2021-09-13 21:36:53
tags:
---


# 《企业应用架构模型》随笔

## 1. 从面向事务流程编程和面向表模型编程转向面向领域编程

前者采用一个Service承载整个业务流程的逻辑并直达数据源
后者平均每个表模型会成为一个Service，由某个Service承担发起者并串联其他Service，从而承载业务逻辑

转向面向领域模型编程

 - 前两个编程模式会随着业务复杂度的提升带来指数级的维护难度，而领域模型编程则相对线性化
 - 由于领域模型存在将领域对象映射到数据库时，其事务复杂度会高于前两者，因此简单的业务系统，并不适用于领域模型
 - 领域模型分离了数据库逻辑和业务逻辑，如`付款Service`提供`create(付款单)`方法，当`购物车Service`请求生成付款单据需要创建付款单据再调用，而在领域模型内`购物车Model`不关心`付款Model`，也不会实现这一层逻辑
 - 那谁来关心呢？通常应该将领域模型分两层，一层承载业务模型本身的内聚逻辑，一层承载业务流程的调度逻辑(服务层)，服务层向表现层提供API


## 2. 领域逻辑模型

对领域逻辑的拆分目前没有共性，但大致可以分为以下几种

- 基于表模型的领域模型
- 业务实体模型+业务策略逻辑的领域模型
	+ 如订单和发票的匹配规则，这类逻辑本身不包含数据存储层，同时又属于业务逻辑内规则用策略模式承载
- 业务实体模型+业务策略逻辑+业务流程行为